;PROGRAM TO PRINT B INSTEAD OF A AND SO ON USING KEYBOARD BUFFER AREA
.MODEL SMALL
.STACK 64
.DATA
MESS1 DB "ENTER A CHARACTER(A/B/C) $"
MESS2 DB "THE OUTPUT IS: $"
KEYBOARDAREA SEGMENT AT 40H 
ORG 1AH
   KEYDATA DB 32 DUP(?)
KEYBOARDAREA ENDS
.CODE
MAIN PROC FAR
ASSUME ES:KEYBOARDAREA
MOV AX,@data
MOV DS,AX
MOV AX,KEYBOARDAREA
MOV ES,AX
CALL CLEANKBA

LEA DX,MESS1
MOV AH,09H
INT 21H
MOV AH,01H;INPUT WITH ECHO
INT 21H 

MOV BH,AH
MOV BL,AL
MOV DL,0AH;PRINTING A NEWLINE
MOV AH,02H
INT 21H

LEA DX,MESS2
MOV AH,09H
INT 21H

MOV AL,BL
MOV AH,BH

MOV DI,1AH;STORING HEAD POINTER LOCATION
MOV BX,ES: WORD PTR [DI]
SUB BX,02
MOV DI,BX;SHIFTING BACK HEAD POINTER TO PREVIOUS LOCATION
INC AL
MOV ES:BYTE PTR[DI],AL
INC DI

CMP AH,1EH
JZ BBB
CMP AH,30H
JZ CCC
CMP AH,2EH
JZ DDD
BBB:
    MOV AH,30H
    JMP DEF
CCC:
    MOV AH,2EH
    JMP DEF
DDD:
    MOV AH,20H
    JMP DEF    
DEF:
MOV ES:BYTE PTR[DI],AH    
MOV DI,1AH
MOV ES:BYTE PTR[DI],1EH
MOV AH,01H;READS IN FROM KEYBOARD BUFFER AREA
INT 21H
MOV AX,4C00H
INT 21H
MAIN ENDP

CLEANKBA PROC NEAR
MOV DI,1AH
MOV [ES:DI],1EH
MOV DI,1CH
MOV [ES:DI],1EH
RET
CLEANKBA ENDP
END MAIN